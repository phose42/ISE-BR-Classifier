import numpy as np
import pandas as pd
from scipy.stats import wilcoxon

# 30-run values for AUC and F1 on baseline and hybrid

# PyTorch:
baseline_f1_pytorch = [0.5544916924809913, 0.6047500809672892, 0.5376835911462523, 0.5723253023169943, 0.5845128136974771, 0.5915662650602409, 0.5722613369672194, 0.5527250583578606, 0.523992673992674, 0.5756622348523293, 0.5379373012267151, 0.5933712121212121, 0.5259151012327056, 0.5194298399345718, 0.5825408770609565, 0.5548392873130987, 0.5578758809248827, 0.6332612116443745, 0.5531442901234568, 0.5823553411572707, 0.5207991780881807, 0.5174011812812358, 0.5434343434343434, 0.5489495798319328, 0.6003350707371556, 0.5959445085658678, 0.5479196301564723, 0.5967399691358024, 0.5221282454760031, 0.5539226177736558]
hybrid_f1_pytorch = [0.7411706441328505, 0.7122147125085709, 0.7009098428453266, 0.7304369826869556, 0.7609232248757813, 0.6732993197278911, 0.6873087082302629, 0.7501700680272109, 0.7651393481341522, 0.7712475919939923, 0.700684905588981, 0.6884191176470589, 0.7252967252967253, 0.7338671691003297, 0.7520910462086933, 0.6695906432748537, 0.751821902765299, 0.756989247311828, 0.7162249295822445, 0.7191520467836258, 0.7020435069215557, 0.7418010752688171, 0.7410077261469077, 0.6884191176470589, 0.7104069264069264, 0.6861111111111111, 0.7403492647058824, 0.649373746547092, 0.7191520467836258, 0.7104069264069264]

hybrid_auc_pytorch = [0.9019779450376335, 0.8815870098039216, 0.8738461538461538, 0.9068656716417911, 0.9130952380952381, 0.8502673796791445, 0.8524101991438675, 0.8995462046204621, 0.9035115979381443, 0.8978978978978979, 0.8719230769230769, 0.8682692307692308, 0.8677971424085413, 0.896551724137931, 0.9049536145632768, 0.8617986798679869, 0.87852266760021, 0.918931475029036, 0.859375, 0.8645382395382395, 0.8579963235294118, 0.8892000700157535, 0.8762330169365345, 0.9007692307692308, 0.9021153846153847, 0.8725, 0.8981292517006803, 0.8734204326408224, 0.9032161555721765, 0.8765306122448979]
baseline_auc_pytorch = [0.8304485389912526, 0.838892551087673, 0.8253106949063539, 0.8292803970223325, 0.8422708422708424, 0.8666666666666667, 0.8671617161716172, 0.8378712871287128, 0.8434615384615385, 0.8937165775401068, 0.827761246280413, 0.8698979591836735, 0.8043781094527364, 0.8792032555150996, 0.8587306701030928, 0.8261335784313726, 0.8337125853316997, 0.8501932989690721, 0.8161176251628514, 0.8351129004025906, 0.8782467532467533, 0.8215384615384616, 0.8651175213675213, 0.8576388888888888, 0.8605746585021197, 0.837097980553478, 0.8512820512820513, 0.8260204081632653, 0.8587688734030198, 0.8151870463428252]

# TensorFlow:
baseline_f1_tensorflow = [0.5700105708245243, 0.5558350951374207, 0.5153227187125492, 0.5038583509513742, 0.5387621946135246, 0.5061239023317432, 0.5580039449752798, 0.5397893856646372, 0.5350080336175997, 0.5806929041941132, 0.5383364692408377, 0.5526348039215686, 0.5702213467904975, 0.5370056497175141, 0.5294934950107364, 0.5239811591234896, 0.5332275176475503, 0.5538059525987091, 0.5250567361254384, 0.576635113469811, 0.5362137049941927, 0.4962615716321983, 0.5317888949635435, 0.4832369942196532, 0.5812492105595555, 0.5554017472622124, 0.5676982591876208, 0.56131592421915, 0.4892338980207984, 0.5104356091916019]
hybrid_f1_tensorflow = [0.7704481792717086, 0.7483958122255994, 0.7531862429940472, 0.7745960882924434, 0.7503877892908108, 0.7658296371319806, 0.7712853049529267, 0.7581052847895331, 0.8019745585722422, 0.7849927849927849, 0.7969286453717427, 0.8056147654930029, 0.7468003674219228, 0.7769544137689632, 0.7887147141097068, 0.7689758929519629, 0.7947030006123699, 0.7648637712435933, 0.7863405440839069, 0.7827592491343174, 0.7432547864506627, 0.7593202817083414, 0.79629348321434, 0.7380586519429106, 0.7619141063018614, 0.7697590568305386, 0.8017369656040748, 0.7859804459000923, 0.7423631123919308, 0.7492103018145766]

baseline_auc_tensorflow = [0.8852348128583393, 0.8646697699521014, 0.8607417307049783, 0.8679424024251611, 0.8710481437754165, 0.8716129032258064, 0.8457597492616479, 0.8848411252782837, 0.8933840108226503, 0.8870789957134109, 0.851033692966066, 0.8456523010350272, 0.8590630740967544, 0.8432079968224547, 0.863987363987364, 0.8757913395796404, 0.8783828934179754, 0.8408341114223468, 0.8414288475165884, 0.8572440894157056, 0.8434413775639402, 0.8527449091909741, 0.8796147672552167, 0.8679887679887679, 0.8932008103317296, 0.8680921052631578, 0.8730393505778756, 0.8848585921756653, 0.8343197482768954, 0.8713823112730216]
hybrid_auc_tensorflow = [0.8945594945594946, 0.8865276934493692, 0.9155027447710374, 0.8945802650957291, 0.8932311621966794, 0.9271119977985691, 0.9028924276893078, 0.9049023915636181, 0.9312484173208407, 0.9285714285714286, 0.9208969775755607, 0.938656866020715, 0.8810114909916301, 0.9169297171938414, 0.9140000000000001, 0.9062681182761063, 0.9336785359625479, 0.9033813513350613, 0.9228533244236552, 0.9038837765379321, 0.893987341772152, 0.9175268164339202, 0.9216820987654322, 0.8920012449424214, 0.9246009906439187, 0.9043999226953552, 0.950385657702731, 0.9077584583516414, 0.9130465949820789, 0.8890268123138033]

# Keras:
baseline_f1_keras = [0.5148833467417538, 0.5467809109478208, 0.46974010709155023, 0.5682118176877087, 0.5311359026369168, 0.544171232004077, 0.5585985814170684, 0.5327412824866136, 0.506417559049138, 0.5089250099720782, 0.6062525157654636, 0.4912706611570248, 0.5395594713656388, 0.5159356425497028, 0.5158148303309593, 0.552819332566168, 0.4933641975308642, 0.5833546298662577, 0.5810400780982032, 0.5472972972972974, 0.576390556222489, 0.5574448895137545, 0.5249899436846339, 0.5620460676488898, 0.5743285123966942, 0.5682118176877087, 0.6056312906102688, 0.5262348841975815, 0.5338777979431337, 0.5181363352095059]
hybrid_f1_keras = [0.7798311013745097, 0.7053161652218256, 0.761891086620957, 0.7146360351058337, 0.7235813549507817, 0.7090330052113492, 0.7372549019607844, 0.7347049689440994, 0.7763219298560506, 0.7075322745425838, 0.73302940015077, 0.6670948115599121, 0.7222989776181266, 0.7024768922074932, 0.7454622203461376, 0.7603553709472712, 0.7603786816269285, 0.6990116801437556, 0.7895935960591133, 0.7126225490196079, 0.7603786816269285, 0.7239933197253665, 0.7166353383458646, 0.7412047186553921, 0.6388140161725068, 0.6993589743589743, 0.7241176470588235, 0.7235813549507817, 0.7309408465068843, 0.7462833099579242]

baseline_auc_keras = [0.8352958492787753, 0.8698795180722891, 0.8422213311948678, 0.8275914634146342, 0.8538484576220424, 0.8789634146341464, 0.8760168302945301, 0.784900284900285, 0.859472049689441, 0.7984944991314418, 0.8727445394112061, 0.8481240981240982, 0.868413433700058, 0.8418803418803418, 0.7804878048780487, 0.8653963414634147, 0.8366571699905032, 0.858044733044733, 0.8570750237416904, 0.8300214822771214, 0.8602693602693603, 0.8237373737373738, 0.8592392932015573, 0.878284267173156, 0.8336767736237857, 0.8213129231675007, 0.8125967991739804, 0.7991452991452992, 0.7978962131837307, 0.8270517787953504]
hybrid_auc_keras = [0.9036087369420702, 0.8264450434261754, 0.9051915163026274, 0.8526688453159041, 0.8486024844720497, 0.8775977456851004, 0.8510032943995207, 0.8712121212121212, 0.8801242236024844, 0.818218954248366, 0.8836519446275544, 0.8002817893624515, 0.8691041468819247, 0.8495318049725542, 0.8594771241830066, 0.8981481481481481, 0.9154631912645297, 0.8243114909781576, 0.8938746438746439, 0.84927877539005, 0.8774928774928774, 0.8601872780109783, 0.8596074707185819, 0.8853535353535354, 0.8158536585365853, 0.8445945945945946, 0.8394171327642037, 0.8663526641153959, 0.880491848576955, 0.8727163821503445]

# Incubator-mxnet:
baseline_f1_incubatormxnet = [0.5192943210127612, 0.6135819704826486, 0.5310781078107811, 0.45993031358885017, 0.5114263199369582, 0.5040881621045148, 0.4887340301974449, 0.5314900153609832, 0.5401433200967639, 0.4933474517747801, 0.5624026479750779, 0.5263717284442673, 0.5508160048807769, 0.5176887356982144, 0.5474147612416334, 0.5230769230769231, 0.48540706605222733, 0.4693961385731891, 0.45524670226847413, 0.535055162946769, 0.5451086956521739, 0.5067319461444308, 0.5080297503434554, 0.4933440712492302, 0.5276190476190477, 0.4884488448844885, 0.5775729646697388, 0.535055162946769, 0.49736217995256765, 0.4816053511705686]
hybrid_f1_incubatormxnet = [0.7434892430972913, 0.6821599453178401, 0.6857258718572588, 0.7300696594427245, 0.7270440251572328, 0.6865140360812232, 0.6614351589677211, 0.7384701912260967, 0.6661538461538462, 0.7010482180293501, 0.6309523809523809, 0.7301082595200242, 0.6661538461538462, 0.7366717903082275, 0.6556732740943267, 0.7617506674217296, 0.7164881107917429, 0.7041984732824427, 0.790017825311943, 0.6860532407407407, 0.7458258795468098, 0.753577106518283, 0.712962962962963, 0.6821599453178401, 0.8274491094147582, 0.6363562818542189, 0.6624858461806463, 0.7086466165413534, 0.6948818897637795, 0.7138461538461538]

baseline_auc_incubatormxnet = [0.8570143884892086, 0.8568702290076335, 0.8656716417910447, 0.8808453237410072, 0.9028776978417264, 0.8367918313570488, 0.9352088661551576, 0.9303057553956835, 0.877140974967062, 0.8749999999999999, 0.8574074074074074, 0.8762671437090042, 0.9019784172661871, 0.9006820119352089, 0.9274809160305344, 0.8683206106870229, 0.8844984802431611, 0.8694241686942417, 0.8199513381995134, 0.9119047619047619, 0.8804457953394124, 0.8623188405797102, 0.9160272804774083, 0.875532821824382, 0.8828061638280617, 0.8425925925925926, 0.881111111111111, 0.8790467625899281, 0.8758992805755397, 0.7805878332194122]
hybrid_auc_incubatormxnet = [0.8688699360341151, 0.8196942446043165, 0.8188405797101449, 0.9006294964028778, 0.897931654676259, 0.8393009377664108, 0.8394160583941606, 0.8776486671223513, 0.8266666666666667, 0.896588486140725, 0.875406283856988, 0.8571981424148607, 0.8294243070362473, 0.8998294970161979, 0.7793998377939984, 0.8980099502487562, 0.8840579710144927, 0.8258513931888545, 0.872093023255814, 0.8484848484848484, 0.8738450604122247, 0.8695652173913043, 0.8651079136690647, 0.9113475177304964, 0.9186602870813397, 0.8576494427558258, 0.8929440389294404, 0.8682864450127877, 0.8217054263565892, 0.8771615980918307]

# Caffe:
baseline_f1_caffe = [0.5227524972253053, 0.5376344086021505, 0.37789351851851855, 0.3693745506829619, 0.5314102564102564, 0.5322455322455322, 0.46209000762776503, 0.4009950248756219, 0.43585049580472923, 0.44516129032258067, 0.4883295194508009, 0.5523423944476575, 0.46209000762776503, 0.3900709219858156, 0.48436233997731326, 0.5227238638068097, 0.443504230960677, 0.4682961897915169, 0.4642622950819672, 0.44396551724137934, 0.44989339019189767, 0.5770491803278688, 0.5271990740740741, 0.4509408602150538, 0.4406108597285068, 0.4195290235488226, 0.4537205081669691, 0.456490034030141, 0.45205905205905206, 0.4432195975503062]
hybrid_f1_caffe = [0.5473684210526316, 0.6474298328602964, 0.7304075235109717, 0.7425850340136055, 0.6474298328602964, 0.661036036036036, 0.6366197183098592, 0.5562435500515996, 0.7577464788732394, 0.5656565656565656, 0.7016713970356354, 0.7577464788732394, 0.6375131717597471, 0.6605263157894736, 0.6587301587301587, 0.48809523809523814, 0.5389467045096183, 0.6489795918367347, 0.5922023182297155, 0.661036036036036, 0.6351515151515151, 0.7337461300309598, 0.5733878027429239, 0.6126126126126126, 0.5931882686849574, 0.6587301587301587, 0.7144316730523628, 0.6872727272727273, 0.6126126126126126, 0.5553741496598639]

baseline_auc_caffe = [0.7698412698412698, 0.7258297258297258, 0.7483974358974359, 0.7099358974358975, 0.7705627705627706, 0.7363636363636363, 0.7175757575757575, 0.7777777777777778, 0.6242424242424243, 0.7866666666666666, 0.6362612612612613, 0.7006578947368421, 0.7388167388167388, 0.7251984126984128, 0.8012820512820513, 0.7478787878787878, 0.6714743589743589, 0.8051801801801801, 0.7019230769230769, 0.7740384615384616, 0.7228661749209695, 0.8303030303030303, 0.7817460317460317, 0.7070524412296564, 0.6981981981981982, 0.6233766233766234, 0.7227564102564102, 0.790235081374322, 0.6767676767676768, 0.6754068716094033]
hybrid_auc_caffe = [0.8125, 0.8946608946608947, 0.8751173708920188, 0.913939393939394, 0.8138528138528138, 0.9270833333333333, 0.8363636363636364, 0.7802469135802469, 0.9054545454545455, 0.8223684210526316, 0.9047619047619048, 0.9196428571428572, 0.7623873873873874, 0.8444846292947559, 0.8214285714285713, 0.71875, 0.8413145539906104, 0.8969258589511755, 0.5957207207207208, 0.8648648648648649, 0.8124098124098125, 0.9134199134199135, 0.7576853526220614, 0.8520833333333334, 0.8657894736842104, 0.737618545837724, 0.8960526315789473, 0.9134615384615384, 0.8583333333333333, 0.8]

# Wilcoxon test function

def run_wilcoxon_test(baseline, hybrid, dataset_name, metric_name):
    stat, p_value = wilcoxon(hybrid, baseline, alternative='two-sided')
    significant = "Yes" if p_value < 0.05 else "No"
    print(f"{dataset_name} - {metric_name}:")
    print(f"  Wilcoxon Statistic: {stat}")
    print(f"  p-value: {p_value:.5f}")
    print(f"  Statistically Significant?: {significant}\n")

# Run tests

print("=== Wilcoxon Signed-Rank Test Results ===\n")

# PyTorch
run_wilcoxon_test(baseline_f1_pytorch, hybrid_f1_pytorch, "PyTorch", "Macro-F1")
run_wilcoxon_test(baseline_auc_pytorch, hybrid_auc_pytorch, "PyTorch", "AUC")

# TensorFlow
run_wilcoxon_test(baseline_f1_tensorflow, hybrid_f1_tensorflow, "TensorFlow", "Macro-F1")
run_wilcoxon_test(baseline_auc_tensorflow, hybrid_auc_tensorflow, "TensorFlow", "AUC")

# Keras
run_wilcoxon_test(baseline_f1_keras, hybrid_f1_keras, "Keras", "Macro-F1")
run_wilcoxon_test(baseline_auc_keras, hybrid_auc_keras, "Keras", "AUC")

# Incubator-mxnet
run_wilcoxon_test(baseline_f1_incubatormxnet, hybrid_f1_incubatormxnet, "Incubator-mxnet", "Macro-F1")
run_wilcoxon_test(baseline_auc_incubatormxnet, hybrid_auc_incubatormxnet, "Incubator-mxnet", "AUC")

# Caffe
run_wilcoxon_test(baseline_f1_caffe, hybrid_f1_caffe, "Caffe", "Macro-F1")
run_wilcoxon_test(baseline_auc_caffe, hybrid_auc_caffe, "Caffe", "AUC")